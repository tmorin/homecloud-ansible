name: Continous Integration
on: [ push, pull_request ]
jobs:
  paper:
    name: Build paper
    runs-on: ubuntu-20.04
    container: asciidoctor/docker-asciidoctor
    steps:
      - uses: actions/checkout@v2
      - name: Build paper-website
        run: |
          asciidoctor paper/README.adoc -D dist/paper -a toc=left -o index.html
          cp paper/*.png dist/paper
      - name: Build paper-pdf
        run: asciidoctor-pdf paper/README.adoc -D dist -o homecloud-paper.pdf -a pdf-theme=paper/pdf-style/basic-theme.yml
      - name: Upload paper-pdf
        uses: actions/upload-artifact@v2
        with:
          name: paper-pdf
          path: dist/homecloud-paper.pdf
      - name: Upload paper-website
        uses: actions/upload-artifact@v2
        with:
          name: paper-website
          path: dist/paper
