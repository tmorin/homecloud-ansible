<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="author" content="Thibault Morin">
<title>homecloud : a cloud at home with Kubernetes and Syncthing</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>homecloud : a cloud at home with Kubernetes and Syncthing</h1>
<div class="details">
<span id="author" class="author">Thibault Morin</span><br>
<span id="revdate">2021-03-29</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_the_original_use_case">The original use case</a></li>
<li><a href="#_the_original_cluster_layout">The original cluster layout</a></li>
<li><a href="#_the_user_services">The user services</a></li>
<li><a href="#_the_hosting_strategies">The hosting strategies</a></li>
<li><a href="#_the_building_blocks">The building blocks</a>
<ul class="sectlevel2">
<li><a href="#_the_container_engine_and_orchestrator">The container engine and orchestrator</a></li>
<li><a href="#_the_cluster_availability">The cluster availability</a></li>
<li><a href="#_the_distributed_block_storage">The distributed block storage</a></li>
<li><a href="#_the_reverse_proxy">The reverse proxy</a></li>
<li><a href="#_monitoring_and_alerting">Monitoring and alerting</a></li>
<li><a href="#_orchestrator_management">Orchestrator management</a></li>
<li><a href="#_backup_and_restore">Backup and restore</a></li>
</ul>
</li>
<li><a href="#_the_components_overview">The components overview</a></li>
<li><a href="#_security_hardening">Security Hardening</a></li>
<li><a href="#_infrastructure_as_code">Infrastructure as code</a></li>
<li><a href="#_the_ansible_collection">The Ansible collection</a>
<ul class="sectlevel2">
<li><a href="#_the_customization_of_armbian_images">The customization of Armbian images</a></li>
<li><a href="#_the_common_configurations">The common configurations</a></li>
<li><a href="#role_k3s_service">The k3s service</a></li>
<li><a href="#_the_keepalived_service">The Keepalived service</a></li>
<li><a href="#_the_kubernetes_deployment_manifests">The Kubernetes deployment manifests</a></li>
<li><a href="#_the_dnas_integration">The dnas integration</a></li>
<li><a href="#_the_ansible_inventory">The Ansible inventory</a></li>
<li><a href="#_the_role_variables">The role variables</a></li>
<li><a href="#_the_common_variables">The common variables</a></li>
</ul>
</li>
<li><a href="#_quality">Quality</a></li>
<li><a href="#_conclusion">Conclusion</a></li>
<li><a href="#appendix_dnas">Appendix A: dnas, a decentralized NAS</a></li>
<li><a href="#appendix_keepalived_integration">Appendix B: Keepalived integration</a></li>
<li><a href="#_glossary">Glossary</a></li>
<li><a href="#_references">References</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>homecloud</code> aims to provide a <a href="#g_cloud_computing">cloud like environment</a>, especially an <a href="#g_internal_cloud">internal cloud</a>, at home.
The underlying infrastructure is primarily based on low cost ARM boards, like Raspberry Pi, and powered by open source solutions like Kubernetes or Syncthing.</p>
</div>
<div class="paragraph">
<p>The main artifact is an Ansible <a href="#ans">[ans]</a> collection designed to bootstrap a ready to use cloud like environment as well as a couple of end-users services.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_original_use_case">The original use case</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The intentions which led to the <code>homecloud</code> creation match ones related to the Framasoft initiative: De-google-ify Internet <a href="#dgo">[dgo]</a>; and its following one: Contributopia <a href="#cpa">[cpa]</a>.</p>
</div>
<div class="paragraph">
<p>Therefore, the original use case is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>be able to host all services which care about private data: contacts, calendars, mobile pictures, private chats, private projects, &#8230;&#8203;</p>
</li>
<li>
<p>be able to manage a human size of users, basically a family.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because big names of cloud computing are de facto discarded, the most affordable solution is to host all those services in a <a href="#g_cluster">cluster</a> of low cost ARM boards, especially at home.</p>
</div>
<div class="paragraph">
<p>Nevertheless, many other use cases could match the need of a self-hosted cluster of low cost ARM boards, which provides the principal characteristics of cloud computing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_original_cluster_layout">The original cluster layout</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Originally<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>, the cluster was composed of four ARM boards manufactured by PINE64 <a href="#p64">[p64]</a>.
However, there are no constraints about the number of nodes.
A <code>homecloud</code> cluster can be composed of one or many nodes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="original_cluster_layout.png" alt="The original cluster layout">
</div>
<div class="title">Figure 1. The original cluster layout</div>
</div>
<div class="paragraph">
<p>The four boards are inter-connected using the home&#8217;s router which is already connected to internet<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>.
Each node is a PINE A64-LTS board <a href="#plts">[plts]</a> embedding an <code>aarch64</code> CPU and 2G of memory.
The used operating system is based on Debian: Armbian <a href="#abn">[abn]</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_user_services">The user services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The primarily purpose of the cluster is to host the following user services:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>dnas: a decentralized NAS (c.f. appendix <a href="#appendix_dnas">dnas, a decentralized NAS</a>) based on:</p>
<div class="ulist">
<ul>
<li>
<p>Syncthing: a free, open-source peer-to-peer file synchronization application <a href="#syt">[syt]</a>.</p>
</li>
<li>
<p>Samba: the standard Windows interoperability suite of programs for Linux and Unix <a href="#smb">[smb]</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Nextcloud: a suite of client-server software for creating and using file hosting services <a href="#ncd">[ncd]</a>.</p>
</li>
<li>
<p>calibre-web: a webapp for browsing, reading and downloading eBooks stored in a Calibre database <a href="#caw">[caw]</a>.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="user_services_layout.png" alt="The provided user services of the cluster">
</div>
<div class="title">Figure 2. The provided user services of the cluster</div>
</div>
<div class="paragraph">
<p>Nextcloud and calibre-web can fetch data from the Samba share as any other compatible clients within the home network.</p>
</div>
<div class="paragraph">
<p>However, to properly operate the above listed services, two hosting strategies are highly emphasis: containerized workloads and container orchestration.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_hosting_strategies">The hosting strategies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first strategy, the containerized workload (i.e. the <a href="#g_containerization">containerization</a>), provides many benefits about the packaging, distribution and usage of the services them-self <a href="#rhc">[rhc]</a>.</p>
</div>
<div class="paragraph">
<p>The key characteristics are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Portability : a container can be easily deployed in a container environment whatever the host&#8217;s operating system within the respect of the container&#8217;s and host&#8217;s architecture.</p>
</li>
<li>
<p>Configurability : a container can be easily configured about its infrastructure (cpu, memory &#8230;&#8203;) but also about the underlying workload (overriding containerized file or environment variables).</p>
</li>
<li>
<p>Isolation : a container cannot exceed its infrastructure limit and so cannot impact sibling running containers.</p>
</li>
<li>
<p>Efficient disk usage : a containerized workload needs less disk usage than virtualized one.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The second one, the container orchestration, provides also many benefits about the overall handling of containerized workloads <a href="#rhco">[rhco]</a>.</p>
</div>
<div class="paragraph">
<p>The key characteristics are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Automatic deployments : a container orchestrator manages it-self the deployment process of containerized workloads across the nodes.</p>
</li>
<li>
<p>Container management : a container orchestrator provides services to monitor and interact with containerized workloads deployed among the cluster nodes.</p>
</li>
<li>
<p>Resource allocation : a container orchestrator monitors and manages the resources to satisfy the requirements of the deployed containerized workloads.</p>
</li>
<li>
<p>Networking configuration : a container orchestrator manages it-self the networking configuration to provide isolation and/or inter-connection between containerized workloads according to their needs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, a wish list of services, and a couple of hosting strategies are not enough to provide an efficient cluster.
Some pieces are still missing: a set of building blocks able to support the services embracing the hosting strategies.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_building_blocks">The building blocks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The purpose of the building blocks is to support the execution of the user services.
Some building blocks are parts of the virtual world whereas others to the physical one.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="building_blocks_and_user_services.png" alt="User Services and Building Blocks">
</div>
<div class="title">Figure 3. User Services and Building Blocks</div>
</div>
<div class="sect2">
<h3 id="_the_container_engine_and_orchestrator">The container engine and orchestrator</h3>
<div class="paragraph">
<p>The containerization of workloads as well as their management are handled by many technologies.
Nevertheless, an effort of standardization emerged from the industry which led to the creation of the Cloud Native Computing Foundation (CNCF) [cncf].
The CNCF hosts many components, some of them are the first building blocks of the <code>homecloud</code> stack.</p>
</div>
<div class="paragraph">
<p>The first is <code>containerd</code> <a href="#cntd">[cntd]</a>. It&#8217;s the container engine which handles the containerization of workloads.
The second one is <code>kubernetes</code> <a href="#k8s">[k8s]</a>. It&#8217;s the container orchestrator managing the cluster of <code>containerd</code> instances.
Finally, the last one is <code>k3s</code> <a href="#k3s">[k3s]</a>. It&#8217;s a distribution of <code>kubernetes</code> dedicated of IoT or other cloudless native environments &#8230;&#8203; like <code>homecloud</code>.</p>
</div>
<div class="paragraph">
<p>The orchestration of containerized workloads is a good starting point.
However, many other concerns have to be tackled, the next one is about availability.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_cluster_availability">The cluster availability</h3>
<div class="paragraph">
<p>Basically when a request comes from Internet, the router has to redirect it to the cluster using the <a href="#g_port_forwarding">port forwarding</a> technique.
Therefore, the router must be configured with an IP able to handle the forwarded requests.</p>
</div>
<div class="paragraph">
<p>In the <code>homecloud</code> context, the configured IP is one of anyone of the cluster nodes, because Kubernetes is internally able to forward requests to the right node whatever the entry point.</p>
</div>
<div class="paragraph">
<p>However, IP addresses can be dynamics and moreover the node availability cannot be guarantied.
It means the configured IP could become unallocated in the future in case of dynamic IP, or pointing to a node which stops to work properly.
Therefore, the cluster is not reliable because the cluster is not <a href="#g_ha">highly available</a> <a href="#doha">[doha]</a>.</p>
</div>
<div class="paragraph">
<p>One of the simplest solutions to prevent unavailability of the cluster is to use the virtual server technique <a href="#vswt">[vswt]</a>.
That means, from the router point of view, the cluster is in fact just a unique server which can be reached with a unique IP address which will never ever change.</p>
</div>
<div class="paragraph">
<p>Keepalived is one of the most popular implementations of the virtual server technique <a href="#kad">[kad]</a>.
An overview of the Keepalived integration is available in the appendix: <a href="#appendix_keepalived_integration">Keepalived integration</a>.</p>
</div>
<div class="paragraph">
<p>Now the cluster is highly available, the next topic is to be sure the containerized workloads are fully highly available too.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_distributed_block_storage">The distributed block storage</h3>
<div class="paragraph">
<p>Deploying a container and providing its high availabilities on a cluster is easy with Kubernetes.
However, it doesn&#8217;t manage the availability of the container&#8217;s data among the nodes.</p>
</div>
<div class="paragraph">
<p>For instance, if a container hosting a database is destroyed and then re-created on a new node by the orchestrator, by default, the new container won&#8217;t start with the data related to the destroyed one.</p>
</div>
<div class="paragraph">
<p>In order to get the availability of the data among the nodes of the cluster, a distributed storage system has to be configured.</p>
</div>
<div class="paragraph">
<p>Kubernetes and its ecosystem provide many solutions which solve the availability issue of the data among the nodes.
One of them, the lighter on, is Longhorn <a href="#lhn">[lhn]</a>.</p>
</div>
<div class="paragraph">
<p>Now containers are able to recover their data over their lifecycles, there is another topic to deal with: how final services will be found and reached from Internet?</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_reverse_proxy">The reverse proxy</h3>
<div class="paragraph">
<p>A <a href="#g_reverse_proxy_server">reverse proxy</a> handles the requests coming from the external world and then dispatch them to the internal one.
In the <code>homecloud</code> context, the reverse proxy handles the requests coming from Internet and then dispatch them to the containerized workloads.
The handling of incoming requests can be straight forward or much complex: enhancement of requests, security, load balancing &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Traefik is one of the most popular technology about reverse proxy <a href="#tra">[tra]</a>.
Moreover, it can be easily integrated in Kubernetes.</p>
</div>
<div class="paragraph">
<p>Presently, the cluster is able to properly serves services within usual circumstances.
Nevertheless, unexpected events can occur and lead to unavailability of the cluster.
Unavailability is not welcome and another building block should prevent it: the monitoring of the cluster&#8217;s status and the alerts broadcasting.</p>
</div>
</div>
<div class="sect2">
<h3 id="_monitoring_and_alerting">Monitoring and alerting</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><span class="yellow-background">TODO</span></p>
</div>
<div class="paragraph">
<p>Introduce the following items:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>prometheus <a href="#pmt">[pmt]</a></p>
</li>
<li>
<p>graphana <a href="#pmt">[pmt]</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_orchestrator_management">Orchestrator management</h3>
<div class="paragraph">
<p>The management of a Kubernetes cluster can be done using the command line interface provided by <code>kubectl</code>.
However, its usage requires access to the terminals of cluster nodes locally or remotely.
Another way is to use a web-app which will be able to directly deals with the Kubernetes API.
So that, the management activities can be done without direct access to the cluster nodes.</p>
</div>
<div class="paragraph">
<p>Portainer is one of the lighter solutions to manage Kubernetes clusters from a web-app <a href="#por">[por]</a>.
Moreover, it provides natively the support of Kubernetes for the expected architectures.</p>
</div>
<div class="paragraph">
<p>The management of the Kubernetes resources cannot resolve all maintenance cases.
The Murphy’s law is too strong, too true.
<em>Anything that can go wrong will go wrong</em>, and it could be disaster.
Therefore, a final building block has to be defined: the backup and restore.</p>
</div>
</div>
<div class="sect2">
<h3 id="_backup_and_restore">Backup and restore</h3>
<div class="paragraph">
<p>In the <code>homecloud</code> context, the term disaster means: data stored in Ceph have been lost.
For instance, the Nextcloud database cannot be used any more because of data corruption which cannot be resolved by the MariaDB engine it-self.
Therefore, <code>homecloud</code> must provide a way <a href="#g_disaster_recovery">to recover the disaster</a>.
The most affordable way to recover data is to regularly backup them and storing them into another system.</p>
</div>
<div class="paragraph">
<p>Longhorn provides a built-in feature to backup blocks on external system.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><span class="yellow-background">TODO</span></p>
</div>
<div class="paragraph">
<p>Introduce Duplicity <a href="#dup">[dup]</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>backup + restore of specific directories/files</p>
</li>
<li>
<p>large set of destinations like SFTP, AWS S3, Google Drive, &#8230;&#8203;</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>At this point, all building blocks have been introduced, it&#8217;s time to summarize the cluster&#8217;s components.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_components_overview">The components overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All <code>homecloud</code> services and building blocks, can be breakdown in two categories:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>services managed by Operating System</p>
</li>
<li>
<p>services managed by Kubernetes</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="components_overview_hierarchy.png" alt="The components hierarchy">
</div>
<div class="title">Figure 4. The components hierarchy</div>
</div>
<div class="paragraph">
<p>Running a highly available cluster able to provide services to end users within isolated execution contexts and, moreover, protected by a modern reverse proxy from Internet accesses is good.
However, it doesn&#8217;t mean the cluster is secured against external threats &#8230;&#8203;</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security_hardening">Security Hardening</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An internal cloud, 1) hosted on low cost ARM boards, 2) available from a domestic Internet access and, 3) managed with non-professional manners could be a target for external threats.
Therefore, in the <code>homecloud</code> context, the best way is, by default, <a href="#g_hardening">to harder</a> every thing.</p>
</div>
<div class="paragraph">
<p>However, the goals of the security hardening subject are wides and sometime not easily reachable.
Could it be possible to easily harden a container image which is built by another entity?
Or to easily harden application configuration without knowing the application it-self?
Is it realistic to adapt the physical installation of a rent house because of security hardening principles?</p>
</div>
<div class="paragraph">
<p>The present paper doesn&#8217;t cover the security hardening of the <code>homecloud</code> external world: the router, the ethernet/wireless networks, the electromagnetic fields &#8230;&#8203; <a href="#hwn">[hwn]</a>.
It focuses only on the virtual world, i.e. from the operating systems to the applications providing the services.</p>
</div>
<div class="paragraph">
<p>Resources exist to deal with the security hardening subject in the scope of a cluster of servers.
One of the most popular projects is the DevSec Project <a href="#dsp">[dsp]</a>.
It covers two hardening area with the Ansible collection <code>devsec.hardening</code> <a href="#acsh">[acsh]</a> :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the operating system GNU/Linux</p>
</li>
<li>
<p>the SSH configuration</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_infrastructure_as_code">Infrastructure as code</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>homecloud</code> cluster can be fully installed manually node by node, task by task, package by package &#8230;&#8203;
However, this approach, even if highly instructive, is time-consuming and error prone.
In the IT industry there is more efficient way to manage infrastructure stuff: the infrastructure as code <a href="#rhic">[rhic]</a>.</p>
</div>
<div class="paragraph">
<p>There are many solutions which embraces infrastructure as code.
One of the most popular one is Ansible.
It is an open source tool to automate IT tasks with a declarative model.
Ansible projects can be stored in a Version Control System but also easily tested in virtual environments, especially in a <a href="#g_continuous_integration">continuous integration</a> process.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_ansible_collection">The Ansible collection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An Ansible collection is mainly composed of Ansible Roles.
A role helps to bundle resources like variables, tasks or templates.
The purpose of a role is to mutate the state of a system (i.e. a host): change file content, install packages, execute command, etc.
Ansible Roles are usually executed in Ansible Playbook.
An Ansible Playbook helps to orchestrate roles according to an inventory of hosts.
In the <code>homecloud</code> context, the inventory describes the nodes of the cluster.</p>
</div>
<div class="paragraph">
<p>The purpose of the <code>homecloud</code> Ansible Collection is to provide a set of Roles as well as a set of Playbooks helping to bootstrap the main building blocks of an internal cloud.</p>
</div>
<div class="sect2">
<h3 id="_the_customization_of_armbian_images">The customization of Armbian images</h3>
<div class="paragraph">
<p>In order to mutate a host using <a href="#g_ssh">SSH</a>, Ansible expects a location (e.g. its IP), and a remote user properly configured.
According to the original cluster layout, it means each node of the cluster must be manually configured before to execute the playbooks of the <code>homecloud</code> collection.</p>
</div>
<div class="paragraph">
<p>In fact, Armbian is by default configured to get an IP by <a href="#g_dhcp">DHCP</a> and to configure users at the first boot.
Therefore, to save time, it is better to implement an Ansible role able to generate a customized <code>.img</code> file per cluster node.
So that, a static IP and a proper user can be configured automatically for each cluster node.
The last remaining action is to manually writes the <code>.img</code> file on the respective eMMC or SD-Card.</p>
</div>
<div class="paragraph">
<p>The Ansible role <code>image_armbian</code> manages the whole processing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>download the <code>.img</code> files</p>
</li>
<li>
<p>for each node patch a dedicated <code>.img</code> file</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_common_configurations">The common configurations</h3>
<div class="paragraph">
<p>Some configurations have to be applied to all nodes of the cluster.
They deal with hostnames, memory management or even package management.
It is the purpose of the Ansible role <code>cluster_node</code>.</p>
</div>
<div class="paragraph">
<p>Basically, all nodes should know the hostname of all cluster nodes.</p>
</div>
<div class="paragraph">
<p>About memory, Armbian enables by default <a href="#g_memory_swapping">memory swapping</a>.
However, its usage on ARM boards leads to poor performances.
Therefore, the Swap must be disabled on each node of the cluster.</p>
</div>
<div class="paragraph">
<p>Finally, it can be necessary to freeze packages.
For instance, the PINE A64-LTS cannot work with eMMC on recent Linux releases.
Therefore, the respective packages have to be frozen otherwise the system couldn&#8217;t restart.</p>
</div>
</div>
<div class="sect2">
<h3 id="role_k3s_service">The k3s service</h3>
<div class="paragraph">
<p>The k3s service is one of the main building block of <code>homecloud</code>.
The service must be available on each host of the cluster.
It installs and configures Kubernetes.
The Ansible role <code>service_k3s</code> configures the hosts accordingly.</p>
</div>
<div class="paragraph">
<p>According to the k3s terminology, a host can be a server or an agent.
The inventory groups of the hosts define the role.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>k3s_srv</code> contains the server nodes.</p>
</li>
<li>
<p><code>k3s_agt</code> contains the agent nodes.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_keepalived_service">The Keepalived service</h3>
<div class="paragraph">
<p>The Ansible role <code>service_keepalived</code> installs and configure Keepalived as an operating service on each host of the cluster.</p>
</div>
<div class="paragraph">
<p>The role configures also the load of the kernel module <code>ip_vs</code> on system boot.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_kubernetes_deployment_manifests">The Kubernetes deployment manifests</h3>
<div class="paragraph">
<p>There is a dedicated Ansible role by manifests.
Each role provides the definition of the manifest as well as its deployment process.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>k3s_csi_driver_smb</code> a CSI plugin to mount Samba shares.</p>
</li>
<li>
<p><code>k3s_dashboard</code> deploys the Kubernetes Dashboard.</p>
</li>
<li>
<p><code>k3s_dnas</code> a decentralized NAS based in Synchting and Samba.</p>
</li>
<li>
<p><code>k3s_longhorn</code> deploys the distributed block storage system: Longhorn.</p>
</li>
<li>
<p><code>k3s_traefik</code> deploys the ingress controller: Traefik.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_dnas_integration">The dnas integration</h3>
<div class="paragraph">
<p>The Ansible role <code>k3s_dnas</code> installs and configures Syncthing, Samba and NFS.
It manages the mount of the block device which contains the files to expose over Syncthing, Samba and NFS.
It manages also the basic configuration of Syncthing, Samba and NFS like credentials.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_ansible_inventory">The Ansible inventory</h3>
<div class="paragraph">
<p>The inventory defines the nodes of the <code>homecloud</code> cluster according to their purposes.</p>
</div>
<div class="listingblock">
<div class="title">The hierarchy of the inventory groups</div>
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">all
  boards
    pine64
    ...
  k3s
    k3s_srv
    k3s_agt
  dnas</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_role_variables">The role variables</h3>
<div class="paragraph">
<p>By convention, the name of the role is the prefix of its variable names.
The convention prevents naming collisions and increase readability of the inventory declarations.</p>
</div>
<div class="paragraph">
<p>For instance, the email tp provide to Let&#8217;s Encrypt is defined with a variable name starting with <code>k3s_traefik</code> because the variable is only used in the Ansible role <code>k3s_traefik</code>: <code>k3s_traefik_acme_email</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_common_variables">The common variables</h3>
<div class="paragraph">
<p>Some Ansible roles share the same variables.
In order to avoid confusions, by convention, the prefix of common variables is <code>homecloud_</code>.</p>
</div>
<div class="paragraph">
<p>For instance, the variable <code>homecloud_virtual_ip</code> is common because it drives the configuration of Traefik as well as declarations of Keepalived.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quality">Quality</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The good point of the infrastructure as code approach is to provide a source code which can be validated in the continuous integration process.</p>
</div>
<div class="paragraph">
<p>The validation of the described Ansible collection focuses on two axes.
The first one checks the syntax of the source code in order increase good practices and preventing the bad one.
The second axe checks the implementation performing end-to-end tests.
Those kinds of tests provide two main benefits: 1) the implemented features are tested before to reach the real life and 2) potential regressions are early identified.</p>
</div>
<div class="paragraph">
<p>For each axe, the Ansible community provides a solution which can be easily integrated in a continuous integration process.</p>
</div>
<div class="paragraph">
<p>Ansible-lint is the solution to check the syntax <a href="#alt">[alt]</a>.
Fortunately, it is shipped with a large set of rules.</p>
</div>
<div class="paragraph">
<p>Molecule is the test framework which help to prepare and execute test scenarios with many virtualization providers <a href="#mol">[mol]</a>.
Therefore, the Ansible collection can directly be tested on a virtual server with 1, 2 or more nodes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Put all together, the described approaches, concepts and technologies help the design as well as the implementation of an internal cloud.
A kind of cloud able to host private data and provide services all around the world for a reasonable amount of users.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix_dnas">Appendix A: dnas, a decentralized NAS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The purpose of <em>dnas</em> is to expose private files over the local network like a usual <a href="#g_nas">NAS</a>  but also from Internet.
Samba and NFS provide remote accesses from the local network.
On the other side, Syncthing brings the decentralized part with its peer-to-peer replication protocol over the local network and Internet.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="user_services_dnas.png" alt="The dnas overview">
</div>
<div class="title">Figure 5. The dnas overview</div>
</div>
<div class="paragraph">
<p>The same disk is <em>opened</em> to the internal network as a Samba/NFS share.
The Syncthing service replicates data to the external SSD Disk.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix_keepalived_integration">Appendix B: Keepalived integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For each board, i.e. node of the cluster, the Keepalived application runs as an operating system service.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="building_blocks_keepalived.png" alt="Overview of the Keepalived integration">
</div>
<div class="title">Figure 6. Overview of the Keepalived integration</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_glossary">Glossary</h2>
<div class="sectionbody">
<div class="dlist glossary">
<dl>
<dt><a id="g_cloud_computing"></a>Cloud Computing</dt>
<dd>
<p>Cloud computing is the use of various services, such as software development platforms, servers, storage and software, over the internet, often referred to as the "cloud."<br>
<a href="https://www.techopedia.com/definition/2/cloud-computing" class="bare">https://www.techopedia.com/definition/2/cloud-computing</a></p>
</dd>
<dt><a id="g_cloud_monitoring"></a>Cloud Monitoring</dt>
<dd>
<p>Cloud monitoring is the process of reviewing, monitoring and managing the operational workflow and processes within a cloud-based IT asset or infrastructure.
It is the use of manual or automated IT monitoring and management techniques to ensure that a cloud infrastructure or platform performs optimally.<br>
<a href="https://www.techopedia.com/definition/29862/cloud-monitoring" class="bare">https://www.techopedia.com/definition/29862/cloud-monitoring</a></p>
</dd>
<dt><a id="g_containerization"></a>Containerization</dt>
<dd>
<p>Containerization is a type of virtualization strategy that emerged as an alternative to traditional hypervisor-based virtualization.<br>
<a href="https://www.techopedia.com/definition/31234/containerization-computers" class="bare">https://www.techopedia.com/definition/31234/containerization-computers</a></p>
</dd>
<dt><a id="g_continuous_integration"></a>Continuous Integration (CI)</dt>
<dd>
<p>Continuous integration (CI) is a software development practice in which each member of a development team integrates his work with that produced by others on a continuous basis.<br>
<a href="https://www.techopedia.com/definition/24368/continuous-integration-ci" class="bare">https://www.techopedia.com/definition/24368/continuous-integration-ci</a></p>
</dd>
<dt><a id="g_cluster"></a>Cluster</dt>
<dd>
<p>A cluster, in the context of servers, is a group of computers that are connected with each other and operate closely to act as a single computer.<br>
<a href="https://www.techopedia.com/definition/997/cluster-servers" class="bare">https://www.techopedia.com/definition/997/cluster-servers</a></p>
</dd>
<dt><a id="g_dhcp"></a>Dynamic Host Configuration Protocol (DHCP)</dt>
<dd>
<p>Dynamic Host Configuration Protocol (DHCP) is a network management protocol used to dynamically assign an IP address to any new node entering the network.
DHCP permits a node to be configured automatically, thereby avoiding the necessity of involvement by a network administrator.<br>
<a href="https://www.techopedia.com/definition/11337/dynamic-host-configuration-protocol-dhcp" class="bare">https://www.techopedia.com/definition/11337/dynamic-host-configuration-protocol-dhcp</a></p>
</dd>
<dt><a id="g_disaster_recovery"></a>Disaster Recovery</dt>
<dd>
<p>Disaster recovery is a set of policies and procedures which focus on protecting an organization from any significant effects in case of a negative event, which may include cyberattacks, natural disasters or building or device failures.<br>
<a href="https://www.techopedia.com/definition/31989/disaster-recovery" class="bare">https://www.techopedia.com/definition/31989/disaster-recovery</a></p>
</dd>
<dt><a id="g_hardening"></a>Hardening</dt>
<dd>
<p>Hardening refers to providing various means of protection in a computer system.
Protection is provided in various layers and is often referred to as defense in depth.<br>
<a href="https://www.techopedia.com/definition/24833/hardening" class="bare">https://www.techopedia.com/definition/24833/hardening</a></p>
</dd>
<dt><a id="g_ha"></a>High Availability (HA)</dt>
<dd>
<p>High availability refers to systems that are durable and likely to operate continuously without failure for a long time.<br>
<a href="https://www.techopedia.com/definition/1021/high-availability-ha" class="bare">https://www.techopedia.com/definition/1021/high-availability-ha</a></p>
</dd>
<dt><a id="g_internal_cloud"></a>Internal Cloud</dt>
<dd>
<p>An internal cloud is a cloud computing service model implemented within an organization&#8217;s dedicated resources and infrastructure.<br>
<a href="https://www.techopedia.com/definition/26648/internal-cloud" class="bare">https://www.techopedia.com/definition/26648/internal-cloud</a></p>
</dd>
<dt><a id="g_memory_swapping"></a>Memory Swapping</dt>
<dd>
<p>Memory swapping is a memory reclamation method wherein memory contents not currently in use are swapped to a disk to make the memory available for other applications or processes.
The exact state or "page" of memory is copied to the disk to make the data contiguous and easy to restore later.<br>
<a href="https://www.techopedia.com/definition/30467/memory-swapping" class="bare">https://www.techopedia.com/definition/30467/memory-swapping</a></p>
</dd>
<dt><a id="g_nas"></a>Network-attached storage (NAS)</dt>
<dd>
<p>Network attached storage (NAS) is a dedicated server, also referred to as an appliance, used for file storage and sharing.
NAS is a hard drive attached to a network, used for storage and accessed through an assigned network address.<br>
<a href="https://www.techopedia.com/definition/26197/network-attached-storage-nas" class="bare">https://www.techopedia.com/definition/26197/network-attached-storage-nas</a></p>
</dd>
<dt><a id="g_port_forwarding"></a>Port Forwarding</dt>
<dd>
<p>Port forwarding is a networking technique through which a gateway or similar device transmits all incoming communication/traffic of a specific port to the same port on any internal network node.<br>
<a href="https://www.techopedia.com/definition/4057/port-forwarding" class="bare">https://www.techopedia.com/definition/4057/port-forwarding</a></p>
</dd>
<dt><a id="g_reverse_proxy_server"></a>Reverse Proxy Server</dt>
<dd>
<p>A reverse proxy server is a type of proxy server that manages a connection or any specific requests coming from an external network/Internet toward an internal network.<br>
<a href="https://www.techopedia.com/definition/16048/reverse-proxy-server" class="bare">https://www.techopedia.com/definition/16048/reverse-proxy-server</a></p>
</dd>
<dt><a id="g_ssh"></a>Secure Shell (SSH)</dt>
<dd>
<p>SSH is a cryptographic protocol and interface for executing network services, shell services and secure network communication with a remote computer.<br>
<a href="https://www.techopedia.com/definition/4127/secure-shell-ssh" class="bare">https://www.techopedia.com/definition/4127/secure-shell-ssh</a></p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references">References</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Opinions</strong></p>
</div>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="cpa"></a>[cpa] Contributopia, <a href="https://contributopia.org/en" class="bare">https://contributopia.org/en</a></p>
</li>
<li>
<p><a id="dgo"></a>[dgo] De-google-ify Internet, <a href="https://degooglisons-internet.org/en" class="bare">https://degooglisons-internet.org/en</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Concepts</strong></p>
</div>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="doha"></a>[doha] What is High Availability?, <a href="https://www.digitalocean.com/community/tutorials/what-is-high-availability" class="bare">https://www.digitalocean.com/community/tutorials/what-is-high-availability</a></p>
</li>
<li>
<p><a id="rhco"></a>[rhco] What is container orchestration?, <a href="https://www.redhat.com/en/topics/containers/what-is-container-orchestration" class="bare">https://www.redhat.com/en/topics/containers/what-is-container-orchestration</a></p>
</li>
<li>
<p><a id="rhc"></a>[rhc] What&#8217;s a Linux container?, <a href="https://www.redhat.com/en/topics/containers/whats-a-linux-container" class="bare">https://www.redhat.com/en/topics/containers/whats-a-linux-container</a></p>
</li>
<li>
<p><a id="rhic"></a>[rhic] What is Infrastructure as Code (IaC)?, <a href="https://www.redhat.com/en/topics/automation/what-is-infrastructure-as-code-iac" class="bare">https://www.redhat.com/en/topics/automation/what-is-infrastructure-as-code-iac</a></p>
</li>
<li>
<p><a id="vswt"></a>[vswt] What is a virtual server?, <a href="http://www.linux-vs.org/whatis.html" class="bare">http://www.linux-vs.org/whatis.html</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Security Hardening</strong></p>
</div>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="hwn"></a>[hwn] How To Harden Your Home Wireless Network?, <a href="https://informationhacker.com/how-to-harden-your-home-wireless-network" class="bare">https://informationhacker.com/how-to-harden-your-home-wireless-network</a></p>
</li>
<li>
<p><a id="dsp"></a>[dsp] DevSec Project, <a href="https://dev-sec.io" class="bare">https://dev-sec.io</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Hardware</strong></p>
</div>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="p64"></a>[p64] PINE64, <a href="https://www.pine64.org" class="bare">https://www.pine64.org</a></p>
</li>
<li>
<p><a id="plts"></a>[plts] PINE A64-LTS, <a href="https://www.pine64.org/devices/single-board-computers/pine-a64-lts" class="bare">https://www.pine64.org/devices/single-board-computers/pine-a64-lts</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Technologies</strong></p>
</div>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="abn"></a>[abn] Armbian, <a href="https://www.armbian.com" class="bare">https://www.armbian.com</a></p>
</li>
<li>
<p><a id="acsh"></a>[acsh] Ansible Collection - devsec.hardening, <a href="https://galaxy.ansible.com/devsec/hardening" class="bare">https://galaxy.ansible.com/devsec/hardening</a></p>
</li>
<li>
<p><a id="alt"></a>[alt] Ansible-lint, <a href="https://github.com/ansible-community/ansible-lint" class="bare">https://github.com/ansible-community/ansible-lint</a></p>
</li>
<li>
<p><a id="ans"></a>[ans] Ansible, <a href="https://www.ansible.com" class="bare">https://www.ansible.com</a></p>
</li>
<li>
<p><a id="caw"></a>[caw] calibre-web <a href="https://github.com/janeczku/calibre-web" class="bare">https://github.com/janeczku/calibre-web</a></p>
</li>
<li>
<p><a id="cncf"></a>[cncf] Cloud Native Computing Foundation, <a href="https://www.cncf.io" class="bare">https://www.cncf.io</a></p>
</li>
<li>
<p><a id="cntd"></a>[cntd] Containerd, <a href="https://containerd.io" class="bare">https://containerd.io</a></p>
</li>
<li>
<p><a id="dup"></a>[dup] duplicity, <a href="http://duplicity.nongnu.org" class="bare">http://duplicity.nongnu.org</a></p>
</li>
<li>
<p><a id="k3s"></a>[k3s] k3s, <a href="https://k3s.io" class="bare">https://k3s.io</a></p>
</li>
<li>
<p><a id="k8s"></a>[k8s] Kubernetes, <a href="https://kubernetes.io" class="bare">https://kubernetes.io</a></p>
</li>
<li>
<p><a id="kad"></a>[kad] Keepalived, <a href="https://www.keepalived.org" class="bare">https://www.keepalived.org</a></p>
</li>
<li>
<p><a id="lhn"></a>[lhn] Longhorn, <a href="https://longhorn.io" class="bare">https://longhorn.io</a></p>
</li>
<li>
<p><a id="mol"></a>[mol] Molecule, <a href="https://github.com/ansible-community/molecule" class="bare">https://github.com/ansible-community/molecule</a></p>
</li>
<li>
<p><a id="ncd"></a>[ncd] Nextcloud, <a href="https://nextcloud.com" class="bare">https://nextcloud.com</a></p>
</li>
<li>
<p><a id="nfs"></a>[nfs] Network File System, <a href="https://tools.ietf.org/html/rfc5661" class="bare">https://tools.ietf.org/html/rfc5661</a></p>
</li>
<li>
<p><a id="pmt"></a>[pmt] Prometheus, <a href="https://prometheus.io" class="bare">https://prometheus.io</a></p>
</li>
<li>
<p><a id="por"></a>[por] Portainer, <a href="https://www.portainer.io" class="bare">https://www.portainer.io</a></p>
</li>
<li>
<p><a id="smb"></a>[smb] Samba, <a href="https://www.samba.org" class="bare">https://www.samba.org</a></p>
</li>
<li>
<p><a id="syt"></a>[syt] Syncthing, <a href="https://syncthing.net" class="bare">https://syncthing.net</a></p>
</li>
<li>
<p><a id="tra"></a>[tra] Traefik, <a href="https://traefik.io" class="bare">https://traefik.io</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. The author, Thibault Morin, declares that there is no conflict of interest with PINE64. Thibault Morin is just a regular consumer of PINE64 products.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. To reduce the complexity of the diagram, the demilitarized zone of the home network is skipped.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-09-20 17:06:38 UTC
</div>
</div>
</body>
</html>