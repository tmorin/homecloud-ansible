<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="Thibault Morin">
<title>homecloud: a cloud at home with Kubernetes and Syncthing</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>homecloud: a cloud at home with Kubernetes and Syncthing</h1>
<div class="details">
<span id="author" class="author">Thibault Morin</span><br>
<span id="revdate">2021-09-30</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_abstract">Abstract</a></li>
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_vision">Vision</a>
<ul class="sectlevel2">
<li><a href="#_business_scenarios">Business scenarios</a></li>
<li><a href="#_drivers">Drivers</a></li>
<li><a href="#_constraints">Constraints</a></li>
<li><a href="#_principles">Principles</a></li>
<li><a href="#_requirements">Requirements</a></li>
<li><a href="#_work_packages">Work Packages</a></li>
</ul>
</li>
<li><a href="#_the_platform">The Platform</a>
<ul class="sectlevel2">
<li><a href="#_the_hosting_strategies">The hosting strategies</a></li>
<li><a href="#_the_container_engine_and_orchestrator">The container engine and orchestrator</a></li>
<li><a href="#_the_cluster_availability">The cluster availability</a></li>
<li><a href="#_the_distributed_block_storage">The distributed block storage</a></li>
<li><a href="#_the_reverse_proxy">The reverse proxy</a></li>
<li><a href="#_monitoring_and_alerting">Monitoring and alerting</a></li>
<li><a href="#_orchestrator_management">Orchestrator management</a></li>
<li><a href="#_backup_and_restore">Backup and restore</a></li>
<li><a href="#_security_hardening">Security hardening</a></li>
<li><a href="#_infrastructure_as_code">Infrastructure as code</a></li>
<li><a href="#_characteristics">Characteristics</a></li>
</ul>
</li>
<li><a href="#_decentralized_nas">Decentralized NAS</a>
<ul class="sectlevel2">
<li><a href="#_characteristics_2">Characteristics</a></li>
<li><a href="#_software_architecture">Software Architecture</a></li>
<li><a href="#_deployment">Deployment</a></li>
<li><a href="#_example">Example</a></li>
</ul>
</li>
<li><a href="#_services">Services</a>
<ul class="sectlevel2">
<li><a href="#_characteristics_3">Characteristics</a></li>
<li><a href="#_software_architecture_2">Software Architecture</a></li>
<li><a href="#_deployment_2">Deployment</a></li>
<li><a href="#_example_2">Example</a></li>
</ul>
</li>
<li><a href="#_deliverables">Deliverables</a></li>
<li><a href="#_glossary">Glossary</a></li>
<li><a href="#_references">References</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_abstract">Abstract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Provide resources to bootstrap and manage:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>an private cloud</p>
</li>
<li>
<p>and self-hosted services</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The main artifact is an Ansible collection.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The genesis of this initiative comes from two Framasoft momentum: De-google-ify Internet <a href="#dgo">[dgo]</a>; and its following one: Contributopia <a href="#cpa">[cpa]</a>.
The main concern is <em>digital independence</em>.
It&#8217;s about surveillance and privacy of what we are, but also centralization of actors and usages.</p>
</div>
<div class="paragraph">
<p>According to this context, the initiative provides a way to self-host services which deal with private data.
It mainly leverages on n private cloud to support its realization.
That means to run a cloud at home, so the name <code>homecloud</code>.</p>
</div>
<div class="paragraph">
<p>A <em>cloud</em> is a network of hardware and software elements which provides dynamically and efficiently common resources (e.g. servers, storage &#8230;&#8203;) <a href="#dcc">[dcc]</a> .
Obviously, the purpose is not to re-do the infrastructure of big actors in the living room.</p>
</div>
<div class="paragraph">
<p>However, a cluster of affordable development boards (like <em>Raspberry PI</em>) associated to open source technologies (like <em>Kubernetes</em>) can be enough to get a working tiny private cloud &#8230;&#8203; in the living room.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vision">Vision</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The primary goal of <code>homecloud</code> is to provide the main services which manage private data (files sharing, contacts and calendars) storing it locally.</p>
</div>
<div class="paragraph">
<p>The secondary goal of <code>homecloud</code> is to provide services embracing both organizational structures: centralized and decentralized.</p>
</div>
<div class="paragraph">
<p><code>homecloud</code> is used by three kind of persons.
Those which take care of their private data.
Those which are skilled enough to administrate the system.
And finally those which have been temporally allowed to interact with some services provided by the system.
Additionally, <code>homecloud</code> can also be used by external systems like agents installed on smartphones, laptops, etc.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="vision_context.png" alt="Context Diagram of `homecloud`">
</div>
<div class="title">Figure 1. Vision: Context Diagram of <code>homecloud</code></div>
</div>
<div class="sect2">
<h3 id="_business_scenarios">Business scenarios</h3>
<div class="sect3">
<h4 id="_photos_synchronization">Photos Synchronization</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Problem</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Photos took on mobile phones are usually, by convenience, synchronized in a third party cloud.
Therefore, the photos binaries are stored somewhere in the world, escaping their owner&#8217;s control.
Once synchronized, the mobile phone&#8217;s owner can browse and manage them according to the vendor&#8217;s user interfaces.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Environment</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The synchronization process can be centralized or decentralized but also unidirectional or bidirectional.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Outcomes</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>With <code>homecloud</code>, the photos can also be synchronized but still remain private because they are stored locally, under the control of the mobile phone&#8217;s owner.
Moreover, they can also be managed using friendly user interfaces.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Human Actors</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>the owner of the photos</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">System Actors</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>a centralized system with authorized agents on the mobile phone(s)</p>
</li>
<li>
<p>and/or a decentralized system leveraging on a network of peer-to-peer agents distributed on nodes (servers, computers, mobile phones &#8230;&#8203;)</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="bs-photos_synchronization-usecases.png" alt="Business Scenario: Usecase Diagram of Photos Synchronization">
</div>
<div class="title">Figure 2. Business Scenario: Usecase Diagram of Photos Synchronization</div>
</div>
<div class="sect4">
<h5 id="_value_stream">Value Stream</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Name</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Handle Photos Changes</p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Description</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The activities involved in keeping photos private from the device to <code>homecloud</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Stakeholder</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The owner of the photos.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Value</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The photos are synchronized and can be managed with interfaces provided by <code>homeloud</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="bs-photos_synchronization-value_stream.png" alt="Business Scenario: Value Stream of Handle Photos Changes">
</div>
<div class="title">Figure 3. Business Scenario: Value Stream of Handle Photos Changes</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Business Scenario: Value Stream Stages of Handle Photos Changes</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Value Stream Stage</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Participating Stakeholders</th>
<th class="tableblock halign-left valign-top">Entrance Criteria</th>
<th class="tableblock halign-left valign-top">Exit Criteria</th>
<th class="tableblock halign-left valign-top">Value Items</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Change Photos on Device</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The act of taking or deleting photos on a device like a smartphone.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Owner of the photos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Owner using its device</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Photos taken or deleted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Photos managed by the user it-self</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Synchronize Photos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The act of replicating changes across systems.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Owner of the photos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Photos taken or deleted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Photos synchronized</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Changes applied everywhere</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Manage Photos on <code>homecloud</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The act of copying, moving or deleting photos.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Owner of the photos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Photos synchronized</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Changes to synchronize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Photos managed according to owner wishes</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_files_synchronization">Files Synchronization</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Problem</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For convenience or backup purpose, it is common to synchronized files among devices or with centralized systems.
For instance, to back up personal documents in case of disasters (e.g. hard disk crash) or to transfer user files from an old computer to a new one.
Most of the built-in (and also convenient) solutions of famous operating systems like <em>Windows</em> or <em>Android</em> are mainly cloud based.
Therefore, for a while, or permanently, the files are stored in a third party cloud, escaping the owner&#8217;s control.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Environment</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The synchronization process can be centralized or decentralized but also unidirectional or bidirectional.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Outcomes</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>With <code>homecloud</code>, the files can also be synchronized but still remain private because they are stored locally, under the control of the mobile phone&#8217;s owner.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Human Actors</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>the owner of the files</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">System Actors</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>a centralized system with authorized agents on edge nodes (computer, mobile phones &#8230;&#8203;)</p>
</li>
<li>
<p>and/or a decentralized system leveraging on a network of peer-to-peer agents distributed on nodes (servers, computers, mobile phones &#8230;&#8203;)</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="bs-files_synchronization-usecases.png" alt="Business Scenario: Usecase Diagram of Files Synchronization">
</div>
<div class="title">Figure 4. Business Scenario: Usecase Diagram of Files Synchronization</div>
</div>
<div class="sect4">
<h5 id="_value_stream_2">Value Stream</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Name</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Handle Files Changes</p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Description</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The activities involved in keeping files private from the device to <code>homecloud</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Stakeholder</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The owner of the files.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Value</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The files are synchronized and can be managed with interfaces provided by <code>homeloud</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="bs-files_synchronization-value_stream.png" alt="Business Scenario: Value Stream of Handle Files Changes">
</div>
<div class="title">Figure 5. Business Scenario: Value Stream of Handle Files Changes</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Business Scenario: Value Stream Stages of Handle Files Changes</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Value Stream Stage</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Participating Stakeholders</th>
<th class="tableblock halign-left valign-top">Entrance Criteria</th>
<th class="tableblock halign-left valign-top">Exit Criteria</th>
<th class="tableblock halign-left valign-top">Value Items</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Change Files on Device</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The act of creating, updating or deleting files on a device like a laptop.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Owner of the files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Owner using its device</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files mutated</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files managed by the user it-self</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Synchronize Files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The act of replicating changes across systems.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Owner of the files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files mutated</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files synchronized</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Changes applied everywhere</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Manage Files on <code>homecloud</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The act of copying, moving or deleting files.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Owner of the files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files synchronized</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Changes to synchronize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files managed according to owner wishes</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_files_sharing">Files Sharing</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Problem</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The synchronization of photos or files leads to a dynamic replication of data.
However, for some cases the replication is overkill.
For instance, to share a file over Internet to a well-known contact.
But also, to stream on the TV a content available in the local network.
In those cases, it is just enough share the content, because only the consumer knows if the content has to be stored permanently or not once received.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Environment</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The share can be done within a local network, for instance using file systems like CIFS or over the web, for instance using a regular HTTP endpoint.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Outcomes</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>With <code>homecloud</code>, the content synchronized are also available for sharing, under the control of their owners, within the local network or over Internet.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Human Actors</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>the owner of the shared content</p>
</li>
<li>
<p>the recipients of the shared content</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">System Actors</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>a centralized system hosting and controlling the accesses</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="bs-files_sharing-usecases.png" alt="Business Scenario: Usecase Diagram of Files Sharing">
</div>
<div class="title">Figure 6. Business Scenario: Usecase Diagram of Files Sharing</div>
</div>
<div class="sect4">
<h5 id="_value_stream_3">Value Stream</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Name</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Share Files</p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Description</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The activities involved in selecting and providing shared files hosted on <code>homecloud</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Stakeholder</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The owner of the files.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Value</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The files are shared abroad the <code>homecloud</code> boundaries.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="bs-files_sharing-value_stream.png" alt="Business Scenario: Value Stream of Share Files">
</div>
<div class="title">Figure 7. Business Scenario: Value Stream of Share Files</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Business Scenario: Value Stream Stages of Share Files</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Value Stream Stage</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Participating Stakeholders</th>
<th class="tableblock halign-left valign-top">Entrance Criteria</th>
<th class="tableblock halign-left valign-top">Exit Criteria</th>
<th class="tableblock halign-left valign-top">Value Items</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select Shared Files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The act of define which files have to be shared.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Owner of the files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files to share</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files selected</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files selected by the user it-self</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provide Shared Files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The act of providing the shared files to the targets.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Owner of the files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files selected</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files shared</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files ready to be consumed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Consume Shared Files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The act of interacting (fetching, streaming, &#8230;&#8203;) with the shared files.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>A Guest</p>
</li>
<li>
<p>Owner of the files</p>
</li>
<li>
<p>A <code>homecloud</code> service</p>
</li>
<li>
<p>An External System</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files shared</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files consumed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files handled by the targets</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_contacts_and_calendars_management">Contacts and Calendars Management</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Problem</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>With smartphones, it became common to have virtual address books.
Because of convenient, the address books are usually synchronized with a third party solution which, most of the time, is managed by the operating system&#8217;s owner.
Therefore, a piece of who we are (i.e. who knows who) are stored in the cloud, somewhere in the world, escaping the control of the address book owner.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Environment</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The synchronization within the local network but also over the Internet.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Outcomes</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>With <code>homecloud</code>, address books and other personal calendars are also synchronized but, they are stored locally, under the control of their owners.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Human Actors</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>the owner of the personal data</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">System Actors</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>a centralized system hosting and controlling the accesses</p>
</li>
<li>
<p>and/or a decentralized system leveraging on a network of peer-to-peer agents distributed on nodes (servers, computers, mobile phones &#8230;&#8203;)</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="bs-contacts_calendars_management-usecases.png" alt="Business Scenario: Usecase Diagram of Contacts &amp; Calendars Management">
</div>
<div class="title">Figure 8. Business Scenario: Usecase Diagram of Contacts &amp; Calendars Management</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drivers">Drivers</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Privacy</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>homecloud</code> emerged because of private data concern.
De facto private date are located within the <code>homecloud</code> boundaries.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Flexibility</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>homecloud</code> cluster is tailored by the user: the topology of the nodes, their operating systems, the available services, the domain names, passwords &#8230;&#8203;</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Extensibility</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The platform which supports the out-of-the-box <code>homecloud</code> services can also be used for other concerns.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Elasticity</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>homecloud</code> resources can be added or removed manually or dynamically.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Performance</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>homecloud</code> is not designed for high performances, intensive scaling and so on.
Its main purpose is a <em>cloud at home</em> able to run on a cheap infrastructure.
In deed, the performances are in fact highly related to hardware concerns and so the user decisions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Security</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Despite delivered artifacts won&#8217;t cover all security concerns, configured resources for the platform and services will fulfill the minimum secure practices.
Nevertheless, the flexibility and extensibility of <code>homecloud</code> provides to the user ways to define its own level of security.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Disaster Recovery</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>homecloud</code> provides services to prevent data loss with backup processes and data replication.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Observability</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Resources of a <code>homecloud</code> cluster can be monitored and observed.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_constraints">Constraints</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Target deployment platform</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>The system must run on development boards at least for production purpose.</p>
</li>
<li>
<p>The system must run in virtual environments at least for development and testing purposes.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Open source</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The system must rely exclusively on open source technologies.
Dispensation can be done when open source alternatives are not available.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Technology Maturity</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Due to the nature of the initiative, <code>homecloud</code> may rely on adventurous solutions.
Nevertheless, when available, matured technologies are emphasis.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Expected Technologies</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>homecloud</code> relies on container orchestration to provide some cloud computing architectural artifacts.
The most complete implementation embracing container orchestration is <code>kubernetes</code>.
Therefore, the main technology involves in <code>homecloud</code> must be <code>kubernetes</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Maintenance</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>homecloud</code> cluster must rely on approaches like automation and self-healing to decrease the maintenance activities.
Moreover, a <code>homecloud</code> should be easily administrate by a single person.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Skills</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>homecloud</code> cluster cannot be managed by anyone, some skills related to system administration, container orchestration &#8230;&#8203; are expected.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_principles">Principles</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Name</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Separation of Services and Platform</p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Statement</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The services should not be tightly coupled to the <code>homecloud</code> platform.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Rationale</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>With a loose coupling approach between the platform and the services, each side can have its own lifecycle.
Moreover, services provided by external sources can also be easily integrated.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Implications</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>homecloud</code> provides must provide two main deliverables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>resources to bootstrap and maintain the platform</p>
</li>
<li>
<p>resources to install and maintain the built-in services</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Moreover, each deliverable can be implemented separately with different paces of development or technologies.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Name</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Convergence of Centralization and Decentralization</p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Statement</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Services provided by `homecloud ` should embrace both organizational structures centralized and decentralized.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Rationale</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Some services, especially those leveraging on files, can be handled from a centralized (e.g. a client/server relationship) or decentralized (e.g. a peer to peer network) approach.
The best approach depends on the context of the usage.
That why, as long as it is possible, the built-in services of <code>homecloud</code> should embrace both organizational structures.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Implications</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The solutions which embrace both organizational structures, especially those working on files, have to be carefully implemented to avoid conflict and data loss.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_requirements">Requirements</h3>
<div class="sect3">
<h4 id="_centralized_synchronization">Centralized Synchronization</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Statement</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The system must provide a service to synchronize files between a client and a server.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Rational</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The requirement is expected by use cases.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Use Cases</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Synchronize Photos</p>
</li>
<li>
<p>Synchronize Files</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Principles</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Centralized approach</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Specification</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>The synchronization should leverage on the WebDav protocol.</p>
</li>
<li>
<p>The synchronization can be handled by a non-standard solution.</p>
</li>
<li>
<p>The synchronized content must be readable and mutable by a decentralized solution.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Statement</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The system must provide a service to synchronize contacts between a client and a server.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Rational</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The requirement is expected by use cases.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Use Cases</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Synchronize Contacts</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Principles</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Centralized approach</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Specification</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>The synchronization should leverage on the CardDav protocol.</p>
</li>
<li>
<p>The synchronization can be handled by a non-standard solution.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Statement</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The system must provide a service to synchronize calendars between a client and a server.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Rational</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The requirement is expected by use cases.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Use Cases</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Synchronize Calendars</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Principles</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Centralized approach</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Specification</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>The synchronization should leverage on the CalDav protocol.</p>
</li>
<li>
<p>The synchronization can be handled by a non-standard solution.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_decentralized_synchronization">Decentralized Synchronization</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Statement</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The system must provide a service to synchronize files between peers.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Rational</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The requirement is expected by use cases.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Use Cases</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Synchronize Photos</p>
</li>
<li>
<p>Synchronize Files</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Principles</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Decentralized approach</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Specification</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>The synchronization can be handled by a non-standard solution.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Statement</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The system must provide a service to synchronize contacts between peers.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Rational</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The requirement is expected by use cases.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Use Cases</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Synchronize Contacts</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Principles</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Decentralized approach</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Specification</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>The synchronization should leverage on the vCard format.</p>
</li>
<li>
<p>The synchronization can be handled by a non-standard solution.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Statement</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The system must provide a service to synchronize calendars between peers.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Rational</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The requirement is expected by use cases.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Use Cases</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Synchronize Calendars</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Principles</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Decentralized approach</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Specification</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>The synchronization should leverage on the iCalendar format.</p>
</li>
<li>
<p>The synchronization can be handled by a non-standard solution.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_sharing">Sharing</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Statement</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The system must provide a service to share files to external systems.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Rational</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The requirement is expected by use cases.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Use Cases</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Share Photos</p>
</li>
<li>
<p>Share Files</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Principles</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Centralized approach</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Specification</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>The following protocols must be supported: CIFS, NFS and WebDav.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Statement</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The system must provide a service to share files to guest.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Rational</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The requirement is expected by use cases.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Use Cases</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Share Photos</p>
</li>
<li>
<p>Share Files</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Principles</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Centralized approach</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Specification</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>A User Interface must be available to create the share.</p>
</li>
<li>
<p>A User Interface must be available to provide the shared content to the guest.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_non_functional">Non-Functional</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Statement</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The system must provide a service to back up and restore data managed by other <code>homecloud</code> services.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Rational</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The requirement is expected to meet drivers.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Drivers</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Disaster Recovery</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Specification</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>The solution should be a "native" feature of the main platform technology.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Statement</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The system must provide a service to observe the <code>homecloud</code> resources.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Rational</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The requirement is expected to meet drivers.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Drivers</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Observability</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-middle"><p class="tableblock">Specification</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>The solution may store data.</p>
</li>
<li>
<p>The solution must provide a user interface.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_work_packages">Work Packages</h3>
<div class="paragraph">
<p><code>homecloud</code> leverages on three main work packages.
The first one, the <em>Platform</em>, provides support for the two other ones.
The second one, the <em>Decentralized NAS</em>, is a regular centralized <a href="#g_nas">NAS</a> dedicated to store the private photos and files.
However, a peer-to-peer system is plugged to it, so that replication can also be handled with a decentralized approach.
Finally, the <em>Services</em>, relies on the <em>Decentralized NAS</em> to manage its content and to provide the remaining services: contacts management, files sharing &#8230;&#8203;</p>
</div>
<div class="imageblock">
<div class="content">
<img src="vison_work_packages.png" alt="Vision: Component Diagram of the Work Packages">
</div>
<div class="title">Figure 9. Vision: Component Diagram of the Work Packages</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_platform">The Platform</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_hosting_strategies">The hosting strategies</h3>
<div class="paragraph">
<p>To properly operate services, <code>homecloud</code> leverages on two hosting strategies: containerized workloads and container orchestration.</p>
</div>
<div class="paragraph">
<p>The first strategy, the containerized workload (i.e. the <a href="#g_containerization">containerization</a>), provides many benefits about the packaging, distribution and usage of the services them-self <a href="#rhc">[rhc]</a>.</p>
</div>
<div class="paragraph">
<p>The key characteristics are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Portability: a container can be easily deployed in a container environment whatever the host&#8217;s operating system within the respect of the container&#8217;s and host&#8217;s architecture.</p>
</li>
<li>
<p>Configurability: a container can be easily configured about its infrastructure (cpu, memory &#8230;&#8203;) but also about the underlying workload (overriding containerized file or environment variables).</p>
</li>
<li>
<p>Isolation: a container cannot exceed its infrastructure limit and so cannot impact sibling running containers.</p>
</li>
<li>
<p>Efficient disk usage: a containerized workload needs less disk usage than virtualized one.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The second one, the container orchestration, provides also many benefits about the overall handling of containerized workloads <a href="#rhco">[rhco]</a>.</p>
</div>
<div class="paragraph">
<p>The key characteristics are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Automatic deployments: a container orchestrator manages it-self the deployment process of containerized workloads across the nodes.</p>
</li>
<li>
<p>Container management: a container orchestrator provides services to monitor and interact with containerized workloads deployed among the cluster nodes.</p>
</li>
<li>
<p>Resource allocation: a container orchestrator monitors and manages the resources to satisfy the requirements of the deployed containerized workloads.</p>
</li>
<li>
<p>Networking configuration: a container orchestrator manages it-self the networking configuration to provide isolation and/or inter-connection between containerized workloads according to their needs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, a couple of hosting strategies are not enough to provide an efficient platform.
Some pieces are still missing: a set of building blocks able to support the services embracing the hosting strategies.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_container_engine_and_orchestrator">The container engine and orchestrator</h3>
<div class="paragraph">
<p>The containerization of workloads as well as their management are handled by many technologies.
Nevertheless, an effort of standardization emerged from the industry which led to the creation of the Cloud Native Computing Foundation (CNCF) <a href="#cncf">[cncf]</a>.
The CNCF hosts many components, some of them are the first building blocks of the <code>homecloud</code> stack.</p>
</div>
<div class="paragraph">
<p>The first one is <code>containerd</code> <a href="#cntd">[cntd]</a>. It&#8217;s the container engine which handles the containerization of workloads.
The second one is <code>kubernetes</code> <a href="#k8s">[k8s]</a>. It&#8217;s the container orchestrator managing the cluster of <code>containerd</code> instances.
Finally, the last one is <code>k3s</code> <a href="#k3s">[k3s]</a>. It&#8217;s a distribution of <code>kubernetes</code> dedicated of IoT or other cloudless native environments &#8230;&#8203; like <code>homecloud</code>.</p>
</div>
<div class="paragraph">
<p>The orchestration of containerized workloads is a good starting point.
However, many other concerns have to be tackled, the next one is about availability.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_cluster_availability">The cluster availability</h3>
<div class="paragraph">
<p>Basically when a request comes from Internet, the router has to redirect it to the cluster using the <a href="#g_port_forwarding">port forwarding</a> technique.
Therefore, the router must be configured with an IP able to handle the forwarded requests.</p>
</div>
<div class="paragraph">
<p>In the <code>homecloud</code> context, the configured IP is one of anyone of the cluster nodes, because Kubernetes is internally able to forward requests to the right node whatever the entry point.</p>
</div>
<div class="paragraph">
<p>However, IP addresses can be dynamics and moreover the node availability cannot be guarantied.
It means the configured IP could become unallocated in the future in case of dynamic IP, or pointing to a node which stops to work properly.
Therefore, the cluster is not reliable because the cluster is not <a href="#g_ha">highly available</a> <a href="#doha">[doha]</a>.</p>
</div>
<div class="paragraph">
<p>One of the simplest solutions to prevent unavailability of the cluster is to use the virtual server technique <a href="#vswt">[vswt]</a>.
That means, from the router point of view, the cluster is in fact just a unique server which can be reached with a unique IP address which will never ever change.</p>
</div>
<div class="paragraph">
<p>Now the cluster is highly available, the next topic is to be sure the containerized workloads are fully highly available too.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_distributed_block_storage">The distributed block storage</h3>
<div class="paragraph">
<p>Deploying a container and providing its high availabilities on a cluster is easy with Kubernetes.
However, it doesn&#8217;t manage the availability of the container&#8217;s data among the nodes.</p>
</div>
<div class="paragraph">
<p>For instance, if a container hosting a database is destroyed and then re-created on a new node by the orchestrator, by default, the new container won&#8217;t start with the data related to the destroyed one.</p>
</div>
<div class="paragraph">
<p>In order to get the availability of the data among the nodes of the cluster, a distributed storage system has to be configured.</p>
</div>
<div class="paragraph">
<p>Now containers are able to recover their data over their lifecycles, there is another topic to deal with: how final services will be found and reached from Internet?</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_reverse_proxy">The reverse proxy</h3>
<div class="paragraph">
<p>A <a href="#g_reverse_proxy_server">reverse proxy</a> handles the requests coming from the external world and then dispatch them to the internal one.
In the <code>homecloud</code> context, the reverse proxy handles the requests coming from Internet and then dispatch them to the containerized workloads.
The handling of incoming requests can be straight forward or much complex: enhancement of requests, security, load balancing &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Presently, the cluster is able to properly serves services within usual circumstances.
Nevertheless, unexpected events can occur and lead to unavailability of the cluster.
Unavailability is not welcome and another building block should prevent it: the monitoring of the cluster&#8217;s status and the alerts broadcasting.</p>
</div>
</div>
<div class="sect2">
<h3 id="_monitoring_and_alerting">Monitoring and alerting</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><span class="yellow-background">TODO</span>
Introduce observability</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_orchestrator_management">Orchestrator management</h3>
<div class="paragraph">
<p>The management of a Kubernetes cluster can be done using the command line interface provided by <code>kubectl</code>.
However, its usage requires access to the terminals of cluster nodes locally or remotely.
Another way is to use a web-app which will be able to directly deals with the Kubernetes API.
So that, the management activities can be done without direct access to the cluster nodes.</p>
</div>
<div class="paragraph">
<p>The management of the Kubernetes resources cannot resolve all maintenance cases.
The Murphy’s law is too strong, too true.
<em>Anything that can go wrong will go wrong</em>, and it could be disaster.
Therefore, another building block has to be defined: the backup and restore.</p>
</div>
</div>
<div class="sect2">
<h3 id="_backup_and_restore">Backup and restore</h3>
<div class="paragraph">
<p>In the <code>homecloud</code> context, the term disaster means: data stored in Ceph have been lost.
For instance, the Nextcloud database cannot be used any more because of data corruption which cannot be resolved by the MariaDB engine it-self.
Therefore, <code>homecloud</code> must provide a way <a href="#g_disaster_recovery">to recover the disaster</a>.
The most affordable way to recover data is to regularly backup them and storing them in another system.</p>
</div>
<div class="paragraph">
<p>At this point, all main building blocks have been introduced.
Nevertheless, side concerns have to be yet tackled.</p>
</div>
</div>
<div class="sect2">
<h3 id="_security_hardening">Security hardening</h3>
<div class="paragraph">
<p>A private cloud, 1) hosted on low cost ARM boards, 2) available from a domestic Internet access and, 3) managed with non-professional manners could be a target for external threats.
Therefore, in the <code>homecloud</code> context, the best way is, by default, <a href="#g_hardening">to harder</a> every thing.</p>
</div>
<div class="paragraph">
<p>However, the goals of the security hardening subject are wides and sometime not easily reachable.
Could it be possible to easily harden a container image which is built by another entity?
Or to easily harden application configuration without knowing the application it-self?
Is it realistic to adapt the physical installation of a rent house because of security hardening principles?</p>
</div>
<div class="paragraph">
<p>The present paper doesn&#8217;t cover the security hardening of the <code>homecloud</code> external world: the router, the ethernet/wireless networks, the electromagnetic fields &#8230;&#8203; <a href="#hwn">[hwn]</a>.
It focuses only on the virtual world, i.e. from the operating systems to the applications providing the services.</p>
</div>
<div class="paragraph">
<p>Resources exist to deal with the security hardening subject in the scope of a cluster of servers.
One of the most popular projects is the DevSec Project <a href="#dsp">[dsp]</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_infrastructure_as_code">Infrastructure as code</h3>
<div class="paragraph">
<p>A <code>homecloud</code> cluster can be fully installed manually node by node, task by task, package by package, etc.
However, this approach, even if highly instructive, is time-consuming and error-prone.
In the IT industry there is more efficient way to manage infrastructure stuff: the infrastructure as code <a href="#rhic">[rhic]</a>.</p>
</div>
<div class="paragraph">
<p>It relies on a declarative model stored in a revision control system (e.g. GIT).
The model is then used to drive tools which automate the IT tasks.
So that, processes become a development artifact.
Therefore, to <em>source code</em> of the artifacts can be developed and tested iteratively in virtual environments, especially in a <a href="#g_continuous_integration">continuous integration</a> context.</p>
</div>
</div>
<div class="sect2">
<h3 id="_characteristics">Characteristics</h3>
<div class="imageblock">
<div class="content">
<img src="platform_stack.svg" alt="The Platform: The Characteristics Stack">
</div>
<div class="title">Figure 10. The Platform: The Characteristics Stack</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. The Platform: The Characteristics Matrix</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 16.6666%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Characteristic</th>
<th class="tableblock halign-left valign-top">MoSCoW value</th>
<th class="tableblock halign-left valign-top">Solutions</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Container Orchestration</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Must Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Kubernetes <a href="#k8s">[k8s]</a> distributed by k3s <a href="#k3s">[k3s]</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Reverse Proxy</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Must Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Traefik <a href="#tra">[tra]</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Infrastructure as code</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Must Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Ansible <a href="#ans">[ans]</a></p>
</li>
<li>
<p>Kustomize <a href="#ktz">[ktz]</a></p>
</li>
<li>
<p>Helm <a href="#hlm">[hlm]</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">High Availability</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Should Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Keepalived <a href="#kad">[kad]</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Distributed Storage</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Should Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Longhorn <a href="#lhn">[lhn]</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Backup and Restore</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Should Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Longhorn <a href="#lhn">[lhn]</a></p>
</li>
<li>
<p>duplicity <a href="#dup">[dup]</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Security Hardening</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Could Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>devsec.hardening <a href="#acsh">[acsh]</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Cluster Management</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Could Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Kubernetes Dashboard <a href="#kdb">[kdb]</a></p>
</li>
<li>
<p>Portainer <a href="#por">[por]</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Observability</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Could Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Prometheus <a href="#pmt">[pmt]</a> &amp; Grafana  <a href="#grf">[grf]</a></p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_decentralized_nas">Decentralized NAS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The purpose of a Decentralized NAS (also named <em>dnas</em>) is to expose private files over the local network like a usual <a href="#g_nas">NAS</a> but also from Internet.
Moreover, changes are handled by centralized protocols (e.g. CIFS, NFS) and also decentralized ones (e.g. p2p).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="dnas_context.png" alt="Decentralized NAS: Context Diagram of Decentralized NAS">
</div>
<div class="title">Figure 11. Decentralized NAS: Context Diagram of Decentralized NAS</div>
</div>
<div class="sect2">
<h3 id="_characteristics_2">Characteristics</h3>
<div class="imageblock">
<div class="content">
<img src="dnas_stack.svg" alt="Decentralized NAS: The Characteristics Stack">
</div>
<div class="title">Figure 12. Decentralized NAS: The Characteristics Stack</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Decentralized NAS: The Characteristics Matrix</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 16.6666%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Characteristic</th>
<th class="tableblock halign-left valign-top">MoSCoW value</th>
<th class="tableblock halign-left valign-top">Solutions</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Synchronization over P2P</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Must Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Syncthing <a href="#syt">[syt]</a></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Share over CIFS</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Must Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Samba <a href="#smb">[smb]</a></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Share over NFS</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Must Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>NFS Server <a href="#nfs">[nfs]</a></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">External Storage</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Must Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>USB Drive, SD-Card, etc.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_software_architecture">Software Architecture</h3>
<div class="paragraph">
<p>The solution leverages on three main runtimes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a NFS server to serve files over the NFS protocol</p>
</li>
<li>
<p>a Samba server to serve files over the CIFS protocol</p>
</li>
<li>
<p>a Syncthing instance to handle files replication over a P2P network</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All runtimes rely on the same source of truth: a location in the file-system.
The location  can be related to a mount of an external block storage, e.g. USB Drive, SD-Card.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="dnas_software.png" alt="Decentralized NAS: Container Diagram of Decentralized NAS">
</div>
<div class="title">Figure 13. Decentralized NAS: Container Diagram of Decentralized NAS</div>
</div>
</div>
<div class="sect2">
<h3 id="_deployment">Deployment</h3>
<div class="paragraph">
<p>Syncthing is managed as a regular service of the operating system.
That means, the process has direct accesses to the host resources, especially the network stack.
The CIFS server and Samba are deployed in Kubernetes within the same pod.
Because the three services rely on the same location in the host filesystem, they have to run on the same <code>homecloud</code> node, i.e. the same board.</p>
</div>
<div class="paragraph">
<p>Many instances of Decentralized NAS can co-exist within the same <code>homecloud</code> cluster.
In that case, Syncthing is used to synchronized data between them.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="dnas_deployment_node.svg" alt="Decentralized NAS: Layout of a dnas node">
</div>
<div class="title">Figure 14. Decentralized NAS: Layout of a dnas node</div>
</div>
</div>
<div class="sect2">
<h3 id="_example">Example</h3>
<div class="paragraph">
<p>In the following example, Decentralized NAS is deployed on two nodes, i.e. two different boards.</p>
</div>
<div class="paragraph">
<p><em>User Phone</em> pushes photos to <em>Node #2</em> with its Syncthing application.
The photos are then stored in the <em>Node #2</em> file system and also synchronized with <em>Node #1</em> because of the Syncthing peering.</p>
</div>
<div class="paragraph">
<p>On <em>User Laptop</em>, private documents (spreadsheets, pictures, etc.) are synchronized with <em>Node #1</em> using Syncthing.
Because of the Syncthing peering with <em>Node #2</em>, the documents are also replicated there.
Additionally, a <em>File Navigator</em> is connected to the <em>Samba</em> server on <em>Node #1</em>, so that photos pushed by <em>User Phone</em> can be locally browsed.
Moreover, downloaded ROMS are pushed to the Decentralized NAS with the same CIFS channel.</p>
</div>
<div class="paragraph">
<p>Finally, on <em>Console</em>, the gaming platform can fetch the ROMs (pushed by <em>User Laptop</em>) on the NFS Server of <em>Node #2</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="dnas_infrastructure.png" alt="Decentralized NAS: An example of Decentralized NAS usage">
</div>
<div class="title">Figure 15. Decentralized NAS: An example of Decentralized NAS usage</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_services">Services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The purpose of Services is to expose services over the web via front-ends for end users as well as web-services for external systems.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="services_context.png" alt="Services: Context Diagram of Services">
</div>
<div class="title">Figure 16. Services: Context Diagram of Decentralized NAS</div>
</div>
<div class="sect2">
<h3 id="_characteristics_3">Characteristics</h3>
<div class="paragraph">
<p>Because of its <em>cloud</em> nature, <code>homecloud</code> can support many services.
Nevertheless, only those identified within the vision description (c.f. <a href="#_vision">Vision</a>) will be detailed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="services_stack.svg" alt="Services: The Characteristics Stack">
</div>
<div class="title">Figure 17. Services: The Characteristics Stack</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Services: The Characteristics Matrix</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 16.6666%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Characteristic</th>
<th class="tableblock halign-left valign-top">MoSCoW value</th>
<th class="tableblock halign-left valign-top">Solutions</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Contacts Management</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Must Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Nextcloud <a href="#ncd">[ncd]</a></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Calendars Management</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Must Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Nextcloud <a href="#ncd">[ncd]</a></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Files (Photos) Synchronization</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Must Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Nextcloud <a href="#ncd">[ncd]</a></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Files Sharing</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Must Have</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Nextcloud <a href="#ncd">[ncd]</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_software_architecture_2">Software Architecture</h3>
<div class="paragraph">
<p>The solution leverages on only one system, Nextcloud, which is composed of three main runtimes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the monolith which handles the requests</p>
</li>
<li>
<p>the database which contains the data like users, contacts, &#8230;&#8203;</p>
</li>
<li>
<p>the cache which contains transient data for improvement</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Moreover, the solution relies on the Decentralized NAS to have access to private files.
So that, private files can be fetched and mutated from both approaches centralized and decentralized.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="services_software.png" alt="Services: Container Diagram of Services">
</div>
<div class="title">Figure 18. Services: Container Diagram of Services</div>
</div>
</div>
<div class="sect2">
<h3 id="_deployment_2">Deployment</h3>
<div class="paragraph">
<p>The Nextcloud system is fully managed by Kubernetes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="services_deployment_nextcloud.png" alt="Services: Nextcloud and Kubernetes integration">
</div>
<div class="title">Figure 19. Services: Nextcloud and Kubernetes integration</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_2">Example</h3>
<div class="paragraph">
<p>The following example shows photos took on <em>User Phone</em> are synchronized <em>User Phone</em></p>
</div>
<div class="paragraph">
<p>In the following example, the Services is deployed on two nodes, i.e. two different boards.</p>
</div>
<div class="paragraph">
<p><em>User Phone</em> pushes photos to <em>Nextcloud Monolith</em> with the local mobile Nexcloud application.
On <em>Nextcloud Monolith</em>, the photos are directly written in a CIFS share provided by <em>Decentralized NAS</em>.
So that, the photos are stored in the local <em>dnas data</em> drive and then replicated on <em>Node #2</em> over Syncthing.</p>
</div>
<div class="paragraph">
<p>On <em>User Laptop</em>, downloaded ROMS are synchronized with <em>Node #1</em> using the local desktop Nexcloud application.
Like for the photos, the ROMS are store in the local <em>dnas data</em> drive and then replicated on <em>Node #2</em>.
The same photos can also be browsed using the front-end of Nextcloud Monolith with an <em>Internet Navigator</em>.</p>
</div>
<div class="paragraph">
<p>Finally, on <em>Console</em>, the gaming platform can fetch the ROMs (pushed by <em>User Laptop</em>) on the NFS Server of <em>Node #2</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="services_infrastructure.png" alt="Services: An example of Services usage">
</div>
<div class="title">Figure 20. Services: An example of Services usage</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deliverables">Deliverables</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>homecloud</code> work packages are bundled in two main deliverables:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>an Ansible Collection <a href="#ans">[ans]</a> which implements both work packages the Platform and Decentralized NAS</p>
</li>
<li>
<p>Kustomize Modules <a href="#ktz">[ktz]</a> which implements the work package Services</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Deliverables: The Platform Matrix</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Solution</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Deliverable</th>
<th class="tableblock halign-left valign-top">Runtime</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">devsec.hardening</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Security Hardening</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ansible Collection</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Operating System</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Keepalived</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>High Availability</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ansible Collection</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Operating System</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">k3s</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Container Orchestration</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ansible Collection</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Operating System</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Traefik</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Reverse Proxy</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ansible Collection</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Kubernetes</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Longhorn</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Distributed Storage</p>
</li>
<li>
<p>Backup and Restore</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ansible Collection</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Kubernetes</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes Dashboard</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Cluster Management</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ansible Collection</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Kubernetes</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Portainer</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Cluster Management</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ansible Collection</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Kubernetes</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Prometheus &amp; Grafana</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Observability</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ansible Collection</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Kubernetes</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Deliverables: The Decentralized NAS Matrix</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Solution</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Characteristics</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Deliverable</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Runtime</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Syncthing</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Files Synchronization</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ansible Collection</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Operating System</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Samba Server</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Files Sharing</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ansible Collection</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Kubernetes</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">NFS Server</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Files Sharing</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ansible Collection</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Kubernetes</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Deliverables: The Services Matrix</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Solution</th>
<th class="tableblock halign-left valign-top">Characteristics</th>
<th class="tableblock halign-left valign-top">Deliverable</th>
<th class="tableblock halign-left valign-top">Runtime</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Nextcloud</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Contacts Management</p>
</li>
<li>
<p>Calendars Management</p>
</li>
<li>
<p>Photos Synchronization</p>
</li>
<li>
<p>Files Synchronization</p>
</li>
<li>
<p>Files Sharing</p>
</li>
<li>
<p>Backup and Restore (with duplicity)</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Kustomize Module</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Kubernetes</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_glossary">Glossary</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="g_containerization"></a>Containerization</dt>
<dd>
<p>Containerization is a type of virtualization strategy that emerged as an alternative to traditional hypervisor-based virtualization.<br>
<a href="https://www.techopedia.com/definition/31234/containerization-computers" class="bare">https://www.techopedia.com/definition/31234/containerization-computers</a></p>
</dd>
<dt class="hdlist1"><a id="g_continuous_integration"></a>Continuous Integration (CI)</dt>
<dd>
<p>Continuous integration (CI) is a software development practice in which each member of a development team integrates his work with that produced by others on a continuous basis.<br>
<a href="https://www.techopedia.com/definition/24368/continuous-integration-ci" class="bare">https://www.techopedia.com/definition/24368/continuous-integration-ci</a></p>
</dd>
<dt class="hdlist1"><a id="g_disaster_recovery"></a>Disaster Recovery</dt>
<dd>
<p>Disaster recovery is a set of policies and procedures which focus on protecting an organization from any significant effects in case of a negative event, which may include cyberattacks, natural disasters or building or device failures.<br>
<a href="https://www.techopedia.com/definition/31989/disaster-recovery" class="bare">https://www.techopedia.com/definition/31989/disaster-recovery</a></p>
</dd>
<dt class="hdlist1"><a id="g_hardening"></a>Hardening</dt>
<dd>
<p>Hardening refers to providing various means of protection in a computer system.
Protection is provided in various layers and is often referred to as defense in depth.<br>
<a href="https://www.techopedia.com/definition/24833/hardening" class="bare">https://www.techopedia.com/definition/24833/hardening</a></p>
</dd>
<dt class="hdlist1"><a id="g_ha"></a>High Availability (HA)</dt>
<dd>
<p>High availability refers to systems that are durable and likely to operate continuously without failure for a long time.<br>
<a href="https://www.techopedia.com/definition/1021/high-availability-ha" class="bare">https://www.techopedia.com/definition/1021/high-availability-ha</a></p>
</dd>
<dt class="hdlist1"><a id="g_port_forwarding"></a>Port Forwarding</dt>
<dd>
<p>Port forwarding is a networking technique through which a gateway or similar device transmits all incoming communication/traffic of a specific port to the same port on any internal network node.<br>
<a href="https://www.techopedia.com/definition/4057/port-forwarding" class="bare">https://www.techopedia.com/definition/4057/port-forwarding</a></p>
</dd>
<dt class="hdlist1"><a id="g_nas"></a>Network-attached storage (NAS)</dt>
<dd>
<p>Network attached storage (NAS) is a dedicated server, also referred to as an appliance, used for file storage and sharing.
NAS is a hard drive attached to a network, used for storage and accessed through an assigned network address.<br>
<a href="https://www.techopedia.com/definition/26197/network-attached-storage-nas" class="bare">https://www.techopedia.com/definition/26197/network-attached-storage-nas</a></p>
</dd>
<dt class="hdlist1"><a id="g_reverse_proxy_server"></a>Reverse Proxy Server</dt>
<dd>
<p>A reverse proxy server is a type of proxy server that manages a connection or any specific requests coming from an external network/Internet toward an internal network.<br>
<a href="https://www.techopedia.com/definition/16048/reverse-proxy-server" class="bare">https://www.techopedia.com/definition/16048/reverse-proxy-server</a></p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references">References</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Opinions</strong></p>
</div>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="cpa"></a>[cpa] Contributopia, <a href="https://contributopia.org/en" class="bare">https://contributopia.org/en</a></p>
</li>
<li>
<p><a id="dgo"></a>[dgo] De-google-ify Internet, <a href="https://degooglisons-internet.org/en" class="bare">https://degooglisons-internet.org/en</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Publication</strong></p>
</div>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="dcc"></a>[dcc] The NIST Definition of Cloud Computing, <a href="https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-145.pdf" class="bare">https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-145.pdf</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Concepts</strong></p>
</div>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="doha"></a>[doha] What is High Availability?, <a href="https://www.digitalocean.com/community/tutorials/what-is-high-availability" class="bare">https://www.digitalocean.com/community/tutorials/what-is-high-availability</a></p>
</li>
<li>
<p><a id="rhco"></a>[rhco] What is container orchestration?, <a href="https://www.redhat.com/en/topics/containers/what-is-container-orchestration" class="bare">https://www.redhat.com/en/topics/containers/what-is-container-orchestration</a></p>
</li>
<li>
<p><a id="rhc"></a>[rhc] What&#8217;s a Linux container?, <a href="https://www.redhat.com/en/topics/containers/whats-a-linux-container" class="bare">https://www.redhat.com/en/topics/containers/whats-a-linux-container</a></p>
</li>
<li>
<p><a id="rhic"></a>[rhic] What is Infrastructure as Code (IaC)?, <a href="https://www.redhat.com/en/topics/automation/what-is-infrastructure-as-code-iac" class="bare">https://www.redhat.com/en/topics/automation/what-is-infrastructure-as-code-iac</a></p>
</li>
<li>
<p><a id="vswt"></a>[vswt] What is a virtual server?, <a href="http://www.linux-vs.org/whatis.html" class="bare">http://www.linux-vs.org/whatis.html</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Security Hardening</strong></p>
</div>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="hwn"></a>[hwn] How To Harden Your Home Wireless Network?, <a href="https://informationhacker.com/how-to-harden-your-home-wireless-network" class="bare">https://informationhacker.com/how-to-harden-your-home-wireless-network</a></p>
</li>
<li>
<p><a id="dsp"></a>[dsp] DevSec Project, <a href="https://dev-sec.io" class="bare">https://dev-sec.io</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Technologies</strong></p>
</div>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="acsh"></a>[acsh] Ansible Collection - devsec.hardening, <a href="https://galaxy.ansible.com/devsec/hardening" class="bare">https://galaxy.ansible.com/devsec/hardening</a></p>
</li>
<li>
<p><a id="ans"></a>[ans] Ansible, <a href="https://www.ansible.com" class="bare">https://www.ansible.com</a></p>
</li>
<li>
<p><a id="cncf"></a>[cncf] Cloud Native Computing Foundation, <a href="https://www.cncf.io" class="bare">https://www.cncf.io</a></p>
</li>
<li>
<p><a id="cntd"></a>[cntd] Containerd, <a href="https://containerd.io" class="bare">https://containerd.io</a></p>
</li>
<li>
<p><a id="dup"></a>[dup] duplicity, <a href="http://duplicity.nongnu.org" class="bare">http://duplicity.nongnu.org</a></p>
</li>
<li>
<p><a id="grf"></a>[grf] Grafana, <a href="https://grafana.com/" class="bare">https://grafana.com/</a></p>
</li>
<li>
<p><a id="hlm"></a>[hlm] Helm, <a href="https://helm.sh" class="bare">https://helm.sh</a></p>
</li>
<li>
<p><a id="k3s"></a>[k3s] k3s, <a href="https://k3s.io" class="bare">https://k3s.io</a></p>
</li>
<li>
<p><a id="k8s"></a>[k8s] Kubernetes, <a href="https://kubernetes.io" class="bare">https://kubernetes.io</a></p>
</li>
<li>
<p><a id="kad"></a>[kad] Keepalived, <a href="https://www.keepalived.org" class="bare">https://www.keepalived.org</a></p>
</li>
<li>
<p><a id="kdb"></a>[kdb] Kubernetes Dashboard, <a href="https://github.com/kubernetes/dashboard" class="bare">https://github.com/kubernetes/dashboard</a></p>
</li>
<li>
<p><a id="ktz"></a>[ktz] Kustomize, <a href="https://kustomize.io" class="bare">https://kustomize.io</a></p>
</li>
<li>
<p><a id="lhn"></a>[lhn] Longhorn, <a href="https://longhorn.io" class="bare">https://longhorn.io</a></p>
</li>
<li>
<p><a id="ncd"></a>[ncd] Nextcloud, <a href="https://nextcloud.com" class="bare">https://nextcloud.com</a></p>
</li>
<li>
<p><a id="nfs"></a>[nfs] Network File System, <a href="https://tools.ietf.org/html/rfc5661" class="bare">https://tools.ietf.org/html/rfc5661</a></p>
</li>
<li>
<p><a id="pmt"></a>[pmt] Prometheus, <a href="https://prometheus.io" class="bare">https://prometheus.io</a></p>
</li>
<li>
<p><a id="por"></a>[por] Portainer, <a href="https://www.portainer.io" class="bare">https://www.portainer.io</a></p>
</li>
<li>
<p><a id="smb"></a>[smb] Samba, <a href="https://www.samba.org" class="bare">https://www.samba.org</a></p>
</li>
<li>
<p><a id="syt"></a>[syt] Syncthing, <a href="https://syncthing.net" class="bare">https://syncthing.net</a></p>
</li>
<li>
<p><a id="tra"></a>[tra] Traefik, <a href="https://traefik.io" class="bare">https://traefik.io</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-09-11 08:10:06 UTC
</div>
</div>
</body>
</html>