---

- name: Add the group
  become: yes
  group:
    name: "{{ service_dnas_username }}"

- name: Add the user
  become: yes
  user:
    name: "{{ service_dnas_username }}"
    group: "{{ service_dnas_username }}"
    home: "{{ service_dnas_mount_where }}"
    create_home: false
    password: "{{ service_dnas_password }}"

- name: Chown the home directory
  become: yes
  file: # noqa 208
    path: "{{ service_dnas_mount_where }}"
    state: directory
    recurse: yes
    owner: "{{ service_dnas_username }}"
    group: "{{ service_dnas_username }}"
