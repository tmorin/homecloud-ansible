---

- name: Add the group
  become: true
  group:
    name: "{{ service_dnas_username }}"

- name: Add the user
  become: true
  user:
    name: "{{ service_dnas_username }}"
    group: "{{ service_dnas_username }}"
    home: "{{ service_dnas_mount_where }}"
    create_home: false
    password: "{{ service_dnas_password }}"

- name: Chown the home directory
  become: true
  file:
    path: "{{ service_dnas_mount_where }}"
    state: directory
    recurse: true
    owner: "{{ service_dnas_username }}"
    group: "{{ service_dnas_username }}"
