---

- name: Install dependencies
  become: yes
  package:
    name: apt-transport-https
    state: present
    force_apt_get: "yes"

- name: Import syncthing GPG key to apt
  become: yes
  apt_key:
    url: 'https://syncthing.net/release-key.txt'
    state: present

- name: Add syncthing repository
  become: yes
  apt_repository:
    repo: 'deb https://apt.syncthing.net/ syncthing stable'
    state: present

- name: Install syncthing
  become: yes
  package:
    name: syncthing
    state: present
    force_apt_get: "yes"
