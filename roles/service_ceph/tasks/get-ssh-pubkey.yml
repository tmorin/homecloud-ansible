---

- name: 'get SSH public key'
  become: yes
  fetch:
    src: "/etc/ceph/ceph.pub"
    dest: "{{ playbook_dir }}/vault/ceph.pub"
    flat: yes
  register: get_ssh_pubkey

- name: 'push SSH public key to the current user'
  ansible.posix.authorized_key:
    user: "{{ ansible_user }}"
    state: present
    key: "{{ lookup('file', playbook_dir~'/vault/ceph.pub') }}"
  register: get_ssh_pubkey
