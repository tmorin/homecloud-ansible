---

- hosts: all
  vars:
    ceph_monitor_ips_as_array: "{{ groups.ceph_mon | default([]) | map('extract', hostvars, ['homecloud_node_ip']) | list }}"
    ceph_monitor_ips: "{{ ceph_monitor_ips_as_array | join(',') }}"
    homecloud_ceph_is_enabled: "{{ ceph_monitor_ips | length > 0 }}"
  tasks:
    - debug: var=ceph_monitor_ips_as_array
    - debug: var=ceph_monitor_ips
    - debug: var=homecloud_ceph_is_enabled
